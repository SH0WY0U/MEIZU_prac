<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>通用头部</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../css/zyq/reset.css">
    <link rel="stylesheet" href="../../css/zyq/commonheader.css">
</head>

<body>
    <header id="header_wrap">
        <section id="com_header">
            <h1><a href="../../index111.html">魅族商城</a></h1>
            <div class="com_right">
                <div class="com_nav">
                    <a class="sec_pointer" href="javascript:; ">手机</a>
                    <a class="sec_pointer" href="javascript:; ">声学</a>
                    <a class="sec_pointer" href="javascript:; ">配件</a>
                    <a class="sec_pointer" href="javascript:; ">生活</a>
                    <a href="javascript:; ">Flyme</a>
                    <a href="javascript:; ">服务</a>
                    <a href="javascript:; ">专卖店</a>
                    <a href="javascript:; ">社区</a>
                    <a href="javascript:; ">app下载</a>
                </div>
                <div class="com_searcher">
                    <input type="text" name="" id="searcher" placeholder="魅族 16th">
                    <img src="../../images/zyq/search.png" alt="" srcset="">
                </div>
                <a class="com_user" href="javascript:;">
                    <img src="../../images/zyq/icon-user@2x_2c33f26.png" alt="" srcset="">
                </a>
                <ul class=" com_menu">
                    <li><a href="../../html/cl/login.html">立即登陆</a></li>
                    <li><a href="../../html/cl/register.html">立即注册</a></li>
                    <li><a href="javascript:;">我的订单</a></li>
                    <li><a href="javascript:;">M码通道</a></li>
                </ul>
                <a class="com_shopcar" href="javascript:;">
                    <img src="../../images/zyq/shopping-cart-gray@2x_6085b4f (1).png" alt="" srcset="">
                </a>
            </div>
        </section>
        <div class="sec_nav">
            <section class="com_phone">
                <a href="javascript:;"><img src="../../images/zyq/phone00.jpg" alt=""><span>魅族 note8</span><span>￥1298</span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
            </section>
            <section class="com_sound">
                <a href="javascript:;"><img src="../../images/zyq/phone00.jpg" alt=""><span>魅族 note8</span><span>￥1298</span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
            </section>
            <section class="com_fittings">
                <a href="javascript:;"><img src="../../images/zyq/phone00.jpg" alt=""><span>魅族 note8</span><span>￥1298</span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
            </section>
            <section class="com_life">
                <a href="javascript:;"><img src="../../images/zyq/phone00.jpg" alt=""><span>魅族 note8</span><span>￥1298</span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
                <a href="javascript:;"><img src="" alt=""><span></span><span></span></a>
            </section>
        </div>
    </header>
    <script src="../../js/zyq/jquery-3.3.1.min.js"></script>
    <script>
        var insertHeader = (function () {
            return {
                init(ele1, ele2, dataUrl, targetUrl) {
                    this.pointer = $(ele1);
                    this.navAll = $(ele2);
                    this.data = [];
                    this.getData(dataUrl, targetUrl);
                    this.event();
                },
                event() {
                    _this = this;
                    this.pointer.on('mouseenter', function () {
                        _this.navAll.eq($(this).index()).css('display', 'flex');
                    })
                    this.pointer.on('mouseleave', function () {
                        _this.navAll.eq($(this).index()).css('display', 'none');
                    })
                },
                getData(dataUrl, targetUrl) {
                    $.get(dataUrl, res => {
                        this.data[0] = res.slice(0, 8);
                        this.data[1] = res.slice(11, 19);
                        this.data[2] = res.slice(24, 32);
                        this.data[3] = res.slice(37, 45);
                        console.log(this.data);
                        this.insertData(targetUrl)
                    })
                },
                insertData(targetUrl) {
                    for (var i = 0; i < this.navAll.length; i++) {
                        for (var j = 0; j < this.data[i].length; j++) {
                            this.navAll.eq(i).children('a').eq(j).attr('href', targetUrl + '?' + 'goods_id=' + this.data[i][j]["goods_id"]);
                            this.navAll.eq(i).children('a').eq(j).children('img').attr('src', 'http://localhost:7777/' + [this.data[i][j]["goods_image"]])
                            this.navAll.eq(i).children('a').eq(j).children('span').eq(0).html([this.data[i][j]["goods_name"]])
                            this.navAll.eq(i).children('a').eq(j).children('span').eq(1).html('<i>￥</i>' + [this.data[i][j]["goods_price"]])
                        }
                    }
                }
            }
        }())
        insertHeader.init('.sec_pointer', '.sec_nav section', 'http://localhost:7777/json/zyq/list.json', 'http://localhost:7777/html/zyq/goods_info.html')
    </script>
</body>

</html>